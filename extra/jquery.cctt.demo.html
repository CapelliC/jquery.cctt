<!DOCTYPE html>
<!--
 * Author: CapelliC
-->
<html>
<head>
    <meta charset="utf-8">
    <title>jQuery CCTT Demo</title>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

    <link rel="stylesheet" href="../jquery.cctt.css">
    <script src="../jquery.cctt.js"></script>
</head>

<p>
    First, an html table with manually expressed structure.
    Visibility should be coherent (stay correct!).
</p>

<table class='cctt'>
    <tr>
        <th>A</th>
        <th>B</th>
        <th>C</th>
    </tr>

    <tr class='cctt-collapsed'>
        <td class='cctt-control'>A.1</td>
        <td>B.1.1</td>
        <td>C.1.1</td>
    </tr>
     <tr style='display:none;'>
        <td></td>
        <td>B.1.2</td>
        <td>C.1.2</td>
     </tr>
     <tr style='display:none;'>
        <td></td>
        <td>B.1.3</td>
        <td>C.1.3</td>
     </tr>

    <tr class='cctt-expanded'>
        <td class='cctt-control'>A.2</td>
        <td>B.2.1</td>
        <td>C.2.1</td>
    </tr>
    <tr class='cctt-expanded'>
        <td class='cctt-control'>A3</td>
        <td>B</td>
        <td>C</td>
    </tr>
</table>

<p>Next, a script constructed one.</p>

<div id='fill-with-table'></div>

<script>

    const trace = console.log

    // get some DOM jQuery utilities
    $.getScript('html_uty.js')
    
    $(function() {
        
        $('.cctt').cctt()

        // examples of script constructed
        if (true) {
            const C = c => td({class:'cctt-control'}, c)
            const c = c => td(                        c)
            const x = td()
            
            const X = cs => tr({class:'cctt-expanded'}, cs)
            const Y = cs => tr({class:'cctt-collapsed'}, cs)            
            const h = cs => tr({style:{display:'none'}}, cs)

            $('#fill-with-table').append(table({id:'t-cctt', class:'cctt'}, [
                Y([C('A'),c('B'),c('C')]),
                 h([x,C('B'),c('C')]),
                 h(['','B','C'].map(td)),
                 h(['','B','C'].map(td)),
                Y([C('A'),c('B'),c('C')]),
                 h(['','B','C'].map(td)),
                 h(['','B','C'].map(td)),
                 h(['','B','C'].map(td)),
            ]))
            $('#t-cctt').cctt()
        }
        if (true) {
            /*
            const ctrl = {class:'cctt-control'}
            const expn = {class:'cctt-expanded'}
            const coll = {class:'cctt-collapsed'}
            const hide = {style:{display:'none'}}
            */
            $('#fill-with-table').append(table({class:'cctt'}, [
                tr({class:'cctt-collapsed'}, [td({class:'cctt-control'},  1),td( 2),td( 3)]),
                tr({style:{display:'none'}}, [td(                          ),td(20),td(30)]),
                tr({style:{display:'none'}}, [td(                          ),td(20),td(30)]),
                tr({class:'cctt-collapsed'}, [td({class:'cctt-control'},  1),td( 2),td( 3)]),
                tr({style:{display:'none'}}, [td(                          ),td(20),td(30)]),
                tr({style:{display:'none'}}, [td(                          ),td(20),td(30)]),
            ]).cctt())
        }
    })
    
</script>
